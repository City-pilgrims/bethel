{% load static %}
{% load custom_filters %}

<style>
    .video-wrapper {
        position: relative;
        display: inline-block;
        width: 90%; /* 비디오 폭을 가득 채움 */
        height: auto; /* 비율 유지 */
    }


</style>


<div style="margin-bottom: 2.5rem;">
    <div class="profile-header" style="display: flex;
                align-items: flex-end; gap: 4px; margin-left: 1.5rem;">
        {% if video.author.profile %}
            <img src="{{ video.author.profile.image.url }}"
                 alt="{{ video.author.profile.nickname }}"
                 style="height: 30px; width: 30px; margin-right: 2px;">
            <span style="color: black; font-size: 1rem;">
                {{ video.author.profile.nickname }}
            </span>
        {% else %}
            <span style="color: black; font-size: 2rem;">
                {{ video.author.profile.nickname }}
            </span>
        {% endif %}
    </div>
    <p style="font-family: NanumDdoBagDdoBag; font-weight: bold; font-size: 2rem; color: black;">
        {{ video.title}}
    </p>
    <div class="video-wrapper" style="position: relative; display: inline-block;">
        <video id="video" width="640" height="360" controls>
            <source src="{{ video.video.url }}" type="video/mp4">
            브라우저가 비디오 태그를 지원하지 않습니다.
        </video>
        <button id="play-button" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.5); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 24px; display: none;">
            ▶
        </button>
    </div>
    <div style="display: flex; justify-content: flex-end; align-items: center; gap: 10px; margin-right: 1.5rem;">
        <p class="text-sm text-gray-600 dark:text-gray-400" style="font-size:0.8rem; color:gray; margin: 0; margin-right: 1.5rem;">
            {{ video.uploaded_at|format_date }}
        </p>
        &nbsp
        {% if user.is_authenticated and user == video.author %}
            <form action="{% url 'wayapp:pilvideodelete' video.pk %}" method="POST" style="display: inline;" onsubmit="return confirmDelete();">
                {% csrf_token %}
                <button type="submit" style="text-decoration: none; background: none; border: none; cursor: pointer; font-size: 1rem;">
                    ❌
                </button>
            </form>
        {% endif %}

    </div>

</div>


<script>
    function confirmDelete() {
        return confirm('이 비디오를 정말 삭제하시겠습니까?'); // 확인 대화 상자
    }


</script>
